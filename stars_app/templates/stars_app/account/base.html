{% extends "stars_app/base.html" %}
{% block body_class %}account-page{% endblock %}

{% block content %}

<div class="page-container">
    <!-- Sidebar -->
    <div class="settings-sidebar">
        <!-- General Section -->
        <div class="sidebar-section">
            <h4 class="sidebar-title">ACCOUNT | {{ user.username }}</h4>
            <ul class="sidebar-menu">
                <li class="sidebar-item {% if active_tab == 'profile' or not active_tab %}active{% endif %}">
                    <a href="{% url 'account' %}?tab=profile" class="sidebar-link" data-tooltip="Profile">
                        <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>Profile</span>
                    </a>
                </li>
                <li class="sidebar-item {% if active_tab == 'favorites' %}active{% endif %}">
                    <a href="{% url 'account' %}?tab=favorites" class="sidebar-link" data-tooltip="Favorites">
                        <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                        </svg>
                        <span>Favorite Locations</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div class="settings-content">
        <div class="account-settings-container">
            <div class="settings-panel">
                {% block settings_content %}
                {% endblock %}
            </div>
        </div>
    </div>
</div>

<script>
// Add this to your account_base.html or a separate JS file
document.addEventListener('DOMContentLoaded', () => {
    // Get the current tab from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const currentTab = urlParams.get('tab') || 'profile';  // Default to profile if no tab

    // Add active class to the current tab
    const sidebarItems = document.querySelectorAll('.sidebar-item');
    sidebarItems.forEach(item => {
        const link = item.querySelector('.sidebar-link');
        const linkTab = new URLSearchParams(link.href.split('?')[1]).get('tab');

        if (linkTab === currentTab) {
            item.classList.add('active');
        } else {
            item.classList.remove('active');
        }
    });
});
</script>
{% endblock %}